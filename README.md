# kotlin SDK for OpenFGA

[![Release](https://img.shields.io/github/v/release/openfga/fga-kotlin-sdk?sort=semver&color=green)](https://github.com/openfga/fga-kotlin-sdk/releases)
[![License](https://img.shields.io/badge/License-Apache_2.0-blue.svg)](./LICENSE)
[![FOSSA Status](https://app.fossa.com/api/projects/custom%2B4989%2Fgithub.com%2Fopenfga%2Ffga-kotlin-sdk.svg?type=shield)](https://app.fossa.com/api/projects/custom%2B4989%2Fgithub.com%2Fopenfga%2Ffga-kotlin-sdk.svg?type=shield)
[![Discord Server](https://img.shields.io/discord/759188666072825867?color=7289da&logo=discord "Discord Server")](https://discord.com/channels/759188666072825867/930524706854031421)
[![Twitter](https://img.shields.io/twitter/follow/openfga?color=%23179CF0&logo=twitter&style=flat-square "@openfga on Twitter")](https://twitter.com/openfga)

This is an autogenerated kotlin SDK for OpenFGA. It provides a wrapper around the [OpenFGA API definition](https://openfga.dev/api).

## Table of Contents

- [About OpenFGA](#about)
- [Resources](#resources)
- [Installation](#installation)
- [Getting Started](#getting-started)
  - [Initializing the API Client](#initializing-the-api-client)
  - [Get your Store ID](#get-your-store-id)
  - [Calling the API](#calling-the-api)
    - [List All Stores](#list-stores)
    - [Create a Store](#create-store)
    - [Get a Store](#get-store)
    - [Delete a Store](#delete-store)
    - [Write Authorization Model](#write-authorization-model)
    - [Read a Single Authorization Model](#read-a-single-authorization-model)
    - [Read Authorization Model IDs](#read-authorization-model-ids)
    - [Check](#check)
    - [Write Tuples](#write-tuples)
    - [Delete Tuples](#delete-tuples)
    - [Expand](#expand)
    - [Read Tuples](#read-tuples)
    - [Read Changes (Watch)](#read-changes-watch)
    - [List Objects](#list-objects)
  - [API Endpoints](#api-endpoints)
  - [Models](#models)
- [Contributing](#contributing)
  - [Issues](#issues)
  - [Pull Requests](#pull-requests)
- [License](#license)

## About

[OpenFGA](https://openfga.dev) is an open source Fine-Grained Authorization solution inspired by [Google's Zanzibar paper](https://research.google/pubs/pub48190/). It was created by the FGA team at [Auth0](https://auth0.com) based on [Auth0 Fine-Grained Authorization (FGA)](https://fga.dev), available under [a permissive license (Apache-2)](https://github.com/openfga/rfcs/blob/main/LICENSE) and welcomes community contributions.

OpenFGA is designed to make it easy for application builders to model their permission layer, and to add and integrate fine-grained authorization into their applications. OpenFGAâ€™s design is optimized for reliability and low latency at a high scale.


## Resources

- [OpenFGA Documentation](https://openfga.dev/docs)
- [OpenFGA API Documentation](https://openfga.dev/api/service)
- [Twitter](https://twitter.com/openfga)
- [OpenFGA Discord Community](https://discord.gg/8naAwJfWN6)
- [Zanzibar Academy](https://zanzibar.academy)
- [Google's Zanzibar Paper (2019)](https://research.google/pubs/pub48190/)

## Installation

Add the package to your `gradle.build.kts` as a dependency like so:

```gradle
dependencies {
    implementation("io.ozee.openfga.client:0.0.1")
}
```

## Getting Started

### Initializing the API Client

[Learn how to initialize your SDK](https://openfga.dev/docs/getting-started/setup-sdk-client)

The OpenFGA client for Kotlin returns a okhttp client for usage. For more information on okhttp, see [this link](https://www.baeldung.com/guide-to-okhttp)

### Without Store ID

update the properties file (Found at `kotlin/main/resources/application.properties`) file with the url of your openfga server.
```kotlin
dev.openfga.kotlin.client.baseUrl=http://localhost:8080

```

To configure the SDK API client without store ID, we can initialize the api client by specifying the scheme and host.

```kotlin
import dev.openfga.kotlin.client.apis.OpenFgaApi

var client: OpenFgaApi = OpenFgaApi()
```


### Get your Store ID

You need your store id to call the OpenFGA API (unless it is to call the [CreateStore](#create-store) or [ListStores](#list-stores) methods).

If your server is configured with [authentication enabled](https://openfga.dev/docs/getting-started/setup-openfga#configuring-authentication), you also need to have your credentials ready.

### Calling the API

#### List Stores

[API Documentation](https://openfga.dev/api/service/docs/api#/Stores/ListStores)

```kotlin
import dev.openfga.kotlin.client.apis.OpenFgaApi
import org.springframework.beans.factory.annotation.Value

// Ensuring you have an application.properties file with
// dev.openfga.kotlin.client.storeID=<STOREID>
// dev.openfga.kotlin.client.baseUrl=<BASEURL>

// Create an instance of the API
private val api: OpenFgaApi = OpenFgaApi()

val response = api.listStores(pageSize = 20, continuationToken = null)

response.stores?.forEach { print{it.name} }
```

#### Create Store

[API Documentation](https://openfga.dev/api/service/docs/api#/Stores/CreateStore)

```kotlin
import dev.openfga.kotlin.client.apis.OpenFgaApi
import dev.openfga.kotlin.client.models.CreateStoreRequest

// Ensuring you have an application.properties file with
// dev.openfga.kotlin.client.baseUrl=<BASEURL>

// Create an instance of the API
private val api: OpenFgaApi = OpenFgaApi()

val response = api.createStore(CreateStoreRequest(
name = "FGA Demo Store"
))

print(response.id)
```


#### Get Store

[API Documentation](https://openfga.dev/api/service/docs/api#/Stores/GetStore)

```kotlin
import dev.openfga.kotlin.client.apis.OpenFgaApi
import org.springframework.beans.factory.annotation.Value

// Ensuring you have an application.properties file with
// dev.openfga.kotlin.client.storeID=<STOREID>
// dev.openfga.kotlin.client.baseUrl=<BASEURL>

// Get StoreID from Properties
@Value("\${dev.openfga.kotlin.client.storeId}")
lateinit var storeId: String

// Create an instance of the API
private val api: OpenFgaApi = OpenFgaApi()

val response = api.getStore(storeId=storeId)

print(response.id)
```

#### Delete Store

[API Documentation](https://openfga.dev/api/service/docs/api#/Stores/DeleteStore)

> Requires a client initialized with a storeId

```kotlin
import dev.openfga.kotlin.client.apis.OpenFgaApi
import org.springframework.beans.factory.annotation.Value

// Ensuring you have an application.properties file with
// dev.openfga.kotlin.client.storeID=<STOREID>
// dev.openfga.kotlin.client.baseUrl=<BASEURL>

// Get StoreID from Properties
@Value("\${dev.openfga.kotlin.client.storeId}")
lateinit var storeId: String

// Create an instance of the API
private val api: OpenFgaApi = OpenFgaApi()

val response = api.deleteStore(storeId=storeId)
```

#### Write Authorization Model

[API Documentation](https://openfga.dev/api/service#/Authorization%20Models/WriteAuthorizationModel)

> Requires a client initialized with a storeId

> Note: To learn how to build your authorization model, check the Docs at https://openfga.dev/docs.

> Learn more about [the OpenFGA configuration language](https://openfga.dev/docs/configuration-language).

```kotlin
import dev.openfga.kotlin.client.apis.OpenFgaApi
import dev.openfga.kotlin.client.models.*
import org.springframework.beans.factory.annotation.Value

// Ensuring you have an application.properties file with
// dev.openfga.kotlin.client.storeID=<STOREID>
// dev.openfga.kotlin.client.baseUrl=<BASEURL>

// Get StoreID from Properties
@Value("\${dev.openfga.kotlin.client.storeId}")
lateinit var storeId: String

// Create an instance of the API
private val api: OpenFgaApi = OpenFgaApi()

val response = api.writeAuthorizationModel(
    storeId=storeId,
    body = WriteAuthorizationModelRequest(
        typeDefinitions = listOf(TypeDefinition(
            type = "Document",
            relations = mapOf(
                "writer" to Userset(),
                "viewer" to Userset(
                    union = Usersets(
                        child = listOf(
                            Userset(),
                            Userset(computedUserset = ObjectRelation(
                                `object` = "",
                                relation = "writer"
                            ))
                        )
                    )
                )
            )
        ))
    )
)

println(response.authorizationModelId)
```


#### Read a Single Authorization Model

[API Documentation](https://openfga.dev/api/service#/Authorization%20Models/ReadAuthorizationModel)

```kotlin

```

#### Read Authorization Model IDs

[API Documentation](https://openfga.dev/api/service#/Authorization%20Models/ReadAuthorizationModels)

```kotlin

```


#### Check

[API Documentation](https://openfga.dev/api/service#/Relationship%20Queries/Check)

```kotlin

```


#### Write Tuples

[API Documentation](https://openfga.dev/api/service#/Relationship%20Tuples/Write)

```kotlin

```

#### Delete Tuples

[API Documentation](https://openfga.dev/api/service#/Relationship%20Tuples/Write)

```kotlin

```

#### Expand

[API Documentation](https://openfga.dev/api/service#/Relationship%20Queries/Expand)

```kotlin

```

#### Read Changes

[API Documentation](https://openfga.dev/api/service#/Relationship%20Tuples/Read)

```kotlin

```

#### Read Changes (Watch)

[API Documentation](https://openfga.dev/api/service#/Relationship%20Tuples/ReadChanges)

```kotlin

```

#### List Objects

[API Documentation](https://openfga.dev/api/service#/Relationship%20Queries/ListObjects)

```kotlin

```


### API Endpoints



### Models



## Contributing

### Issues

If you have found a bug or if you have a feature request, please report them on the [sdk-generator repo](https://github.com/openfga/sdk-generator/issues) issues section. Please do not report security vulnerabilities on the public GitHub issue tracker.

### Pull Requests

All changes made to this repo will be overwritten on the next generation, so we kindly ask that you send all pull requests related to the SDKs to the [sdk-generator repo](https://github.com/openfga/sdk-generator) instead.

## Author

[OpenFGA](https://github.com/openfga)

## License

This project is licensed under the Apache-2.0 license. See the [LICENSE](https://github.com/openfga/fga-kotlin-sdk/blob/main/LICENSE) file for more info.


